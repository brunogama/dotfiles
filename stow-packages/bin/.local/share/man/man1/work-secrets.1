.TH WORK-SECRETS 1 "September 2025" "Work Secrets 1.0" "User Commands"
.SH NAME
work-secrets \- work-specific credential management functions
.SH SYNOPSIS
.B load-work-secrets
.RI [ pattern ]
.RI [ quiet ]
.br
.B store-work-secret
.I key
.I value
.br
.B get-work-secret
.I key
.br
.B list-work-secrets
.RI [ pattern ]
.br
.B backup-work-secrets
.RI [ master_password ]
.br
.B sync-work-secrets
.RI [ master_password ]
.SH DESCRIPTION
The work-secrets system provides specialized functions for managing work-related credentials. It integrates with macOS Keychain for local storage and CredMatch for encrypted backup and synchronization.
.PP
These functions are automatically available when work configuration is loaded (on work machines or when work-mode is enabled).
.SH FUNCTIONS
.TP
.BI "load-work-secrets " "[pattern] [quiet]"
Load work secrets from Keychain into environment variables. Pattern defaults to API keys, tokens, URLs, and secrets. Set quiet to "true" to suppress output.
.TP
.BI "store-work-secret " "key value"
Store a new work secret in macOS Keychain.
.TP
.BI "get-work-secret " key
Retrieve a specific work secret from Keychain.
.TP
.BI "list-work-secrets " "[pattern]"
List all available work secrets in Keychain matching the pattern.
.TP
.BI "backup-work-secrets " "[master_password]"
Backup all Keychain work secrets to CredMatch encrypted storage. If master_password is not provided, it will be retrieved from Keychain.
.TP
.BI "sync-work-secrets " "[master_password]"
Sync work secrets from CredMatch to local Keychain. If master_password is not provided, it will be retrieved from Keychain.
.SH ALIASES
.PP
When work configuration is loaded, these aliases are available:
.TP
.B ws
Same as: load-work-secrets
.TP
.B ws-list
Same as: list-work-secrets
.TP
.B ws-store
Same as: store-work-secret
.TP
.B ws-get
Same as: get-work-secret
.TP
.B ws-backup
Same as: backup-work-secrets
.TP
.B ws-sync
Same as: sync-work-secrets
.TP
.B work-secrets
Same as: list-work-secrets
.SH EXAMPLES
.PP
Load all work secrets into environment:
.RS
.B load-work-secrets
.RE
.PP
Store a new work API key:
.RS
.B store-work-secret "COMPANY_API_KEY" "abc123xyz"
.RE
.PP
Get a specific secret:
.RS
.B get-work-secret "COMPANY_API_KEY"
.RE
.PP
List available work secrets:
.RS
.B list-work-secrets
.RE
.PP
Backup all work secrets to CredMatch:
.RS
.B backup-work-secrets
.RE
.PP
Sync secrets from CredMatch to Keychain:
.RS
.B sync-work-secrets
.RE
.PP
Using aliases:
.RS
.B ws-store "PROJECT_TOKEN" "token123"
.br
.B ws-list
.br
.B ws-backup
.RE
.SH WORK PROFILES
.PP
The
.B work-profile
function allows switching between different work environments:
.TP
.BI "work-profile " "dev|development"
Load development work secrets
.TP
.BI "work-profile " "prod|production"  
Load production work secrets
.TP
.BI "work-profile " "staging"
Load staging work secrets
.TP
.BI "work-profile " "default"
Load default work profile
.SH PATTERNS
.PP
Default pattern matches:
.IP \[bu] 2
.*API_KEY$ (any API key)
.IP \[bu] 2
.*_TOKEN$ (any token)
.IP \[bu] 2
.*_URL$ (any URL)
.IP \[bu] 2
.*_SECRET$ (any secret)
.PP
You can provide custom regex patterns to match specific credential types.
.SH MACHINE CONFIGURATION
.PP
Work secrets are only loaded automatically on work machines. To enable on any machine:
.RS
.B work-mode on
.br
.B reload-shell
.RE
.PP
To disable:
.RS
.B work-mode off
.br
.B reload-shell
.RE
.PP
Check current mode:
.RS
.B work-mode status
.RE
.SH INTEGRATION
.PP
Work secrets integrate with:
.IP \[bu] 2
.B macOS Keychain: 
Local secure storage
.IP \[bu] 2
.B CredMatch: 
Encrypted backup and sync
.IP \[bu] 2
.B dump-api-keys: 
Keychain extraction utility
.IP \[bu] 2
.B store-api-key: 
Keychain storage utility
.IP \[bu] 2
.B Home Sync: 
Multi-machine synchronization
.SH DEPENDENCIES
.PP
Required commands:
.IP \[bu] 2
.B dump-api-keys
.IP \[bu] 2
.B store-api-key
.IP \[bu] 2
.B get-api-key
.IP \[bu] 2
.B credmatch
.SH FILES
.TP
.I ~/.config/zsh/.zsh_functions/work-secrets
Function definitions
.TP
.I ~/.config/zsh/work-config.zsh
Work configuration and aliases
.TP
.I ~/.work-machine
Work mode marker file
.SH EXIT STATUS
Functions return 0 on success, 1 on error.
.SH SEE ALSO
.BR credmatch (1),
.BR work-mode (1),
.BR store-api-key (1),
.BR dump-api-keys (1),
.BR home-sync (1)
.SH AUTHOR
Bruno Gama (dotfiles system)
.SH COPYRIGHT
This is free software; you are free to change and redistribute it.
